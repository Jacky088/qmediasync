# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html),
and is generated by [Changie](https://github.com/miniscruff/changie).


## v0.10.20 - 2025-10-07
### Fixed
* 修正115接口的qps可能为0,导致无法播放的问题
### Removed
* 移除115同步时对元数据文件做的大小判断,防止因为115原因导致的重复下载元数据文件


## v0.10.19 - 2025-09-30
### Changed
* 遇到token失效时重试请求以使用新的token
* 遇到访问量过高时，休息30秒后重试，如果3次仍失败，则返回错误
* 同步失败时记录实际的失败原因

## v0.10.18 - 2025-09-29
### Changed
* 重构上传下载队列，去掉锁，防止死锁导致崩溃

## v0.10.17 - 2025-09-28
### Changed
* 
* Reconstruction of 115 rate limiter

## v0.10.16 - 2025-09-23
### Fixed
* 编辑同步目录时STRM存放目录的路径分隔符错误的问题
* openlist同步时移动云盘报错的问题

## v0.10.15 - 2025-09-23
### Changed
* 115查询文件列表并发改为5，查询文件详情并发改为3，去掉全局暂停，增加限速

## v0.10.14 - 2025-09-22
### Changed
* 115访问凭证刷新改用定时任务控制，115接口调用不再触发刷新
* 115同步改为并发10线程，提高全量和增量的同步效率

## v0.10.13 - 2025-09-21
### Fixed
* 修正本地目录类型的同步目录在同步时会删除已有的strm文件

## v0.10.12 - 2025-09-21
### Changed
* 删除同步目录时暂时禁用自动删除目录路径，先观察是否稳定
### Fixed
* 本地目录类型由于源路径前面的/被删除导致无法同步
* 添加本地目录类型的同步目录时，不自动创建源路径+目标路径的STRM存放目录

## v0.10.11 - 2025-09-19
### Fixed
* 解决死锁导致的无法请求115接口

## v0.10.10 - 2025-09-19
### Fixed
* 刷新115访问凭证时增加读写锁，防止多线程同时进行导致token失效
* 修正遗留导致的同步无法开始（检查115始终未授权）

## v0.10.9 - 2025-09-19
### Fixed
* 修正任务详情文件对比去掉任务详情的收集目录结构阶段
* 修正任务详情文件对比的分页错误

## v0.10.8 - 2025-09-19
### Fixed
* 修正openlist添加和编辑时因为缓存无法使用新数据的问题

## v0.10.7 - 2025-09-19
### Changed
* 115改为全量同步和增量同步，逻辑完全区分；全量同步会生成目录树缓存文件，增量同步只根据目录树缓存文件比对，目录树缓存永不过期，需要时手动全量同步
### Fixed
* 修复添加和编辑同步目录时STRM存放目录的路径计算错误
* 错别字修复

## v0.10.6 - 2025-09-19
### Added
* 增加元数据下载开关，如果关闭元数据下载则关闭元数据上传
### Changed
* 删除.meta隐藏文件，每次上传时主动查询目录ID
* 115同步时去掉采集目录结构阶段
### Fixed
* 修正115上传逻辑

## v0.10.5 - 2025-09-18
### Fixed
* 修正115同步时多线程资源竞争问题

## v0.10.4 - 2025-09-18
### Added
* 增加openlist上传元数据
### Fixed
* 打开上传下载元数据

## v0.10.3 - 2025-09-18
### Fixed
* 修正115同步时报错的问题：多线程资源竞争
* 修正添加openlist账号显示未授权：如果错误增加错误提示，如果正确则成功显示授权
* 修正115访问凭证失效和过期的处理逻辑，失效时发送电报通知重新授权；过期正确刷新访问凭证
* 修正windows下目录选择接口返回错误时依然会选中错误的目录
* 修正115和openlist添加同步目录时选择目录会报错的问题
* 修正openlist版本strm的链接不对的问题
## v0.10.2 - 2025-09-18
### Fixed
* 修正115同步时报错的问题：多线程资源竞争
* 修正添加openlist账号显示未授权：如果错误增加错误提示，如果正确则成功显示授权
* 修正115访问凭证失效和过期的处理逻辑，失效时发送电报通知重新授权；过期正确刷新访问凭证
* 修正windows下目录选择接口返回错误时依然会选中错误的目录
* 修正115和openlist添加同步目录时选择目录会报错的问题
## v0.10.1 - 2025-09-17
### Fixed
* 新增ChangeLog生成器

## v0.10 - 2025-09-17
### Fixed
- 修正最小视频大小无法设置为0的问题
- 修正来源路径下没有文件夹导致无法同步的问题
- 修正同步记录无法删除的问题
- 修正同步时要删除的文件路径取值错误问题
- 修正编辑115的同步目录选择来源路径无法返回上一级的问题
- 修正首页上传下载中的待处理数量不正确的问题

Features:
- 优化115同步效率
- 新增OpenList同步源
